CREATE TABLE IF NOT EXISTS Users (NetId VARCHAR(200) NOT NULL PRIMARY KEY, Name VARCHAR(200));
CREATE TABLE IF NOT EXISTS Classes (CRN VARCHAR(200) NOT NULL PRIMARY KEY, Title VARCHAR(200), Department VARCHAR(200), Instructor VARCHAR(200), Note VARCHAR(280) NOT NULL DEFAULT "Nothing here.");
CREATE TABLE IF NOT EXISTS Events(EventId int PRIMARY KEY AUTO_INCREMENT, CRN VARCHAR(200) NOT NULL, Title VARCHAR(100) NOT NULL, DueDate VARCHAR(200) NOT NULL, Event_Des VARCHAR(2000) NOT NULL, FOREIGN KEY(CRN) REFERENCES Classes(CRN));
CREATE TABLE IF NOT EXISTS Enrollments(CRN VARCHAR(200) NOT NULL, NetId VARCHAR(200) NOT NULL, FOREIGN KEY(CRN) REFERENCES Classes(CRN), FOREIGN KEY(NetId) REFERENCES Users(NetId) ON DELETE CASCADE, PRIMARY KEY(CRN, NetId));
CREATE TABLE IF NOT EXISTS Sessions(NetID VARCHAR(200) NOT NULL, SessionToken VARCHAR(200) NOT NULL, CreateTime bigint NOT NULL, FOREIGN KEY(NetID) REFERENCES Users(NetId) ON DELETE CASCADE, PRIMARY KEY(SessionToken));
CREATE TABLE IF NOT EXISTS EventDone(NetId VARCHAR(200) NOT NULL, EventId int NOT NULL, FOREIGN KEY(NetId) REFERENCES Users(NetId), FOREIGN KEY(EventId) REFERENCES Events(EventId) ON DELETE CASCADE, PRIMARY KEY(EventId, NetId));
CREATE TABLE IF NOT EXISTS Documents(id int PRIMARY KEY AUTO_INCREMENT, format VARCHAR(5), content MEDIUMBLOB, EventId int NOT NULL, author VARCHAR(200) NOT NULL, FOREIGN KEY(EventId) REFERENCES Events(EventId), FOREIGN KEY(author) REFERENCES Users(NetId) ON DELETE CASCADE);
