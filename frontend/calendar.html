<!DOCTYPE html>
<html>
<head>
<meta name="google-signin-scope" content="profile email">
<meta name="google-signin-client_id" content="667147779945-d349v2ioe3f5kvqhhsvrcvepj8jqpqrn.apps.googleusercontent.com">
<script src="https://apis.google.com/js/platform.js" async defer></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<script>
  // This will load on page load with the class data
$(document).ready(function(){

// This is a button that when clicked will do shit
        $.getJSON("/api/calendar?date=today", function(result) {
        })
        .done(function(result) {
            var calendarHolder = "";
            var n = result["message"];
            calendarHolder += "<div class='container-fluid' style='padding:30px'>"
            calendarHolder += "<h2 style='font-size:40px; font-family:Times, sans-serif'> Classes </h1>"
            calendarHolder += "<ul>";
            for (var i in n.titles) {
              var assignmentDataHolder = "";
              calendarHolder += "<li "+ "style='font-size:20px;'>" + "<a href='/class.html?crn=" + i + "'" + ">";
              calendarHolder += n.titles[i];
              calendarHolder += "</a>";
              calendarHolder += "<ul>";
              for (var j in n.events[i]) {
                console.log(n.events[i])
                assignmentDataHolder += "<li>" + n.events[i][j].title + "</li>";
              }
              assignmentDataHolder += "</ul>";
              calendarHolder += assignmentDataHolder;
              calendarHolder += "</li>"
            }
            calendarHolder += "</ul>";
            calendarHolder += "</div>"
            calendarHolder += "";
            $(document.getElementById("class-data")).append(calendarHolder);
        })
        .fail(function(jqXHR, textStatus, errorThrown) { alert('getJSON request failed! ' + textStatus); })
});
</script>
</head>
<body>

  <style>
  body {
    background-color: #D3D3D3;
  }
  </style>
  <div class="jumbotron text-center" style="background-color: #122B4A">
  <h1 style="color: #D67713; font-size:60px" align="center">
    Calendar
  </h1>
</div>

<nav class="navbar navbar-default">
	<div>
	<ul class="nav navbar-nav">
		<li class="active"><a href="#">Calendar</a></li>
		<li><a href="/addClass.html">Add a Class</a></li>
		<li><a href="/dropClass.html">Drop a Class</a></li>
	</ul>
</div>
</nav>

  <div style="color: #EA6100;" id="class-data">
    <div id="assignmentData">
    </div>
  </div>

<script>
	function signOut() {
		var auth2 = gapi.auth2.getAuthInstance();
		auth2.signOut().then(function () {
			console.log('User signed out.');
		});
}
</script>

</body>
